## 리팩터링 2판

    마틴 파울러

## 챕터별 특징

    1장. 작은 프로그램을 리팩터링해서 더  나은 객체 지향 프로그램으로 만드는 과정을 보여주고
        각종 리팩터링 기법을 적용하는 법을 설명한다.
        리팩터링을 제대로 알고 싶다면 1장을 읽고 이해하길 바람.
    2장. 리팩터링의 일반 원칙, 정의, 당위성을 설명한다.
        리팩터링할 때 생기는 문제점 몇가지도 간략히 다룸.
    3장. 코드에서 나는 악취를 찾아내는 방법과 리팩터링을 통해 문제의 부분을 말끔히 제거하는 방법을 설명함
    4장. 테스트를 작성하는 방법

## 2.1. 리팩터링이란?

    리팩터링은 코드에 집중하지만 시스템 설계에 미치는 영향이 크다.

    소프트웨어의 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법
    여러가지 리팩터링 기법을 적용해서 소프트웨어를 재구성 하며.
    리팩터링을 하면 처음부터 완벽한 설계를 갖추기보다는 개발을 진행하면서 지속적으로 설계하는 방법
    시스템을 구축하는 과정에서 더 나은 설계가 무엇인지 배우게 되며 그 결과 개발의 시작부터 끝날 떄까지 프로그램을 줄곧 우수한 설계를 유지한다.

### 리팩터링[명사]

    소프트웨어의 동작은 유지한 채 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법

### 리팩터링하다[동사]

    소프트웨어의 동작은 유치한 채 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성하다.

### 리팩터링의 방법

    특정한 방식에 따라 코드를 정리하는 것만이 리팩터링이다.
    리팩터링 하는 동안에는 코드가 항상 정상 작동하기 때문에 전체 작업이 끝나지 않았더라도 멈출 수 있다. (단계적, 점진적)
    리팩터링중 버그를 수정하면 안된다.

### 인터페이스가 바뀌는 경우가 많다.

    함수 선언, 함수 옮기기, 함수 추출하기 등에 따라서 인터페이스가 변경되는데 사용자 관점에선 변경 되면 안된다

### 성능 최적화하 비슷하다.

    코드를 변경하지만 프로그램의 전박적인 기능은 그대로 유지한다.
    리팩터링은 코드를 이해하고 수정하기 쉽게 만드는 것이며 성능은 좋아질 수도 나빠질 수도 있다.
    성능 최적화는 오로지 속도개선에만 신경 쓴다. 

## 2.2. 기능 추가와 리팩터링

    기능을 추가할 때는 기존 코드는 건드리지 않고 새 기능을 추가하기만 하고
    리팩터링을 할 때는 기능 추가는 절대 하지 않기로 다짐한 뒤 오로지 코드 재구성에만 전념한다. 

## 2.3. 리팩터링하는 이유

### 리팩터링하면 소프트웨어 설계가 좋아진다.

    리팩터링 하지 않으면 소프트웨어의 내부 아키텍처가 썩기 쉽다.
    아키텍처를 충분히 이해하지 못한 채 단기 목표만을 위해 코드를 수정하다보면 기반 구조가 무너지기 쉽다.
    코드만 봐서는 설계를 파악하기 어려워지며 코드 구조가 무너지기 시작하면 악효과가 누적된다.
    코드가 길어지기 십상이고 중복 코드가 많아진다. (중복 코드 제거는 설계 개선 작업의 중요한 축)
    코드량이 줄면 수정하는데 드는 노력이 줄어든다. 중복 코드를 제거하면 모든 코드가 언제나 고유한 일을 수행함을 보장할 수 있게되며
    이는 바람직한 설계의 핵심이다.

### 리팩터링하면 소프트웨어를 이해하기 쉬워진다.

    컴퓨터에게 시키려는 일과 이를 표현한 코드의 차이를 최대한 줄여야 한다.
    프로그래밍은 결국 내가 원하는 바를 정확하게 표현하는 일이기 때문.
    리팩터링은 코드가 더 잘 읽히게 도와주며 코드의 목적이 더 잘 드러나게, 내 의도를 더 명확하게 전달할 수 있다.
    미래의 나에게도...

### 리팩터링하면 버그를 쉽게 찾을 수 있다.

    리팩터링하면 코드가 하는 일을 깊이 파악하게 되면서 코드에 반영 할 수 있게 된다.

### 리팩터링하면 프로그래밍 속도를 높일 수 있다.

    내부 설계와 가독성이 개선되고 버그가 줄어든다. 초기에는 진척이 빨랏지만 점점 시간이 오래 걸리는 경우를 줄일 수 있다.
    코드가 명확하면 버그를 만들 가능성도 줄고 버그를 만들더라도 디버깅하기가 훨씬 쉽다.
    그렇게 되면 프로그램 요구사항이 바뀌더라도 설계를 지속해서 개선할 수 있다.

## 2.4 언제 리팩터링 해야 할까?

### 3의 법칙 
    1. 처음에는 그냥 한다.
    2. 비슷한 일을 두 번째로 하게되면 일단 계속 진행한다.
    3. 비슷한 일을 세 번째 하게 되면 리팩터링 한다.

### 준비를 위한 리팩터링 : 기능을 쉽게 추가하게 만들기
    리팩터링 하기 가장 좋은 시점은 새로운 기능을 추가하기 직전이다.
    구조를 살짝 바꾸면 다른 작업을 하기가 훨쒼 쉬어질 만한 부분을 찾는다
    버그를 잡을 때도 마찬가지로 준비를 위한 리팩터링으로 상황을 개선해놓으면
    버그가 수정된 상태가 오래 지속될 가능성을 높이고 기능 추가도 좀 더 쉽게 할 수 있따.

### 이해를 위한 리팩터링: 코드를 이해하기 쉽게 만들기
    코드를 수정하려면 먼저 그 코드가 하는 일을 파악해야 한다.
    리팩터링하면 머리로 이해한 것 을 코드에 옮겨 담을 수 있따. 

### 쓰레기 줍기 리팩터링
    간단히 수정할 수 있는 것은 즉시 고치고
    시간이 좀 걸리는 일은 짦은 메모만 남긴 다음. 하던 일을 끝내고 나서 처리한다.
    항상 처음보다 깔끔하게 정리하고 떠나자.
    각각의 작은 단계가 코드를 깨뜨리지 않기에 작업을 잘게 나눠서 몇 달에 걸쳐 진행하더라도 그 사이 코드가 깨지면 안된다.

### 계획된 리팩터링과 수시로 하는 리팩터링 
    기능을 추가하거나 버그를 잡는 동안 리팩터링도 함께 한다.
    즉 프로그래밍 과정에 자연스럽게 녹인다.
    리팩터링을 눈앞의 문제뿐 아니라 앞으로 할 작업에도 도움ㅇ르 주기 때문에 굉장히 중요한 점이다. 프로그래밍 과정이라고 생각하자.
    
    보기 싫은 코드를 발견하면 리팩터링하자, 잘 작성된 코드 역시 수많은 리팩터링을 거쳐야 한다.
    무언가 수정하려 할 때는 먼저 수정하기 쉽게 정돈하고 그런 다음 쉽게 수정하자.

    새 기능을 추가하기 쉽도록 코드를 수정하는 것이 그 기능을 빠르게 추가하는 길일 수 있음을 알자.
    계획된 리팩터링은 최소한으로 줄이고 드러나지 않게 기회가 될 때마다 해야 한다.

### 오래 걸리는 리팩터링
    리팩터링은 대부분 몇 분 안에 끝난다.
    주어진 문제를 몇 주에 걸쳐 조금씩 해결해가는 편이 효과적일 때가 많다.
    리팩터링해야 할 코드와 관련된 작업을 하게 될 때마다 원하는 방향으로 조금씩 개선하는 방식으로 ...
    리팩터링은 코드를 깨트리지 않는다는 장점을 활용하는 것..

### 코드 리뷰에 리팩터링 활용하기
    코드 리뷰는 개발팀 전체에 지식을 전파하는 데 좋다. 다른 사람의 아이디어를 얻을 수 있다.
    리팩터링을 다른 이의 코드를 리뷰하는 데도 도움이 된다.
    리팩터링은 코드 리뷰의 결과를 더 구체적으로 도출하는 데에도 도움이 된다.
    작성자와 페어프로그래밍 하는 방식으로 코드리뷰 하는 방식도 도움이 된다.

### 관리자에게는 뭐라고 말해야 할까?
    리팩터링은 소프트웨어를 빠르게 만드는데 아주 효과적이다.
    현재 소프트웨어를 이해하려면 리팩터링부터 하는 편이 빠르며 
    기능 추가를 할 때도 마찬가지..
    가장 빠른 방법이 리팩터링이기에 리팩터링부터 한다.

### 리팩터링 하지 말아야 할 떄
    굳이 수정할 필요가 없다면 리팩터링하지 않는다.
    처음부터 새로 작성하는 게 쉬울 때도 리팩터링 하지 않는다.



    

## 리팩터링의 목표

    복잡성 감소
    가독성 향상
    유지 보수성을 개선
    확장성을 높임
    더 단순하고, 깔끔하고 표현력이 뛰어난 코드, 내부 아키텍처/객체 모델을 만듬

## 왜 리팩토링을 배워야 하는 걸까?

1. 깨끗한 코드로 작성 할 수 있다.
2. 코드의 문제를 파악 할 수 있다.
3. 코드의 문제를 해결 할 수 있다.

## 리팩터링에서 하면 안되는 일

    기능 변경/추가 x
    버그 수정 x
    성능 개선을 위해서 리팩터링 x
    버전 업데이트 x

## 리팩터링이 왜 필요할까?

    1. 개발 초기 단계에 완벽한 시스템 설계가 어려움.
    2. 프로그램의 요구사항이 수정된다. (기능 추가 / 변경)
    3. 코드를 이해하기 쉬워진다.
    4. 예상하지 못한 에러가 발생하기 쉽다.
    5. 유지보수가 어려워진다. 
    퀄리티가 좋은 프로젝트 일 수록 개발 생산성이 향상된다.

### 소프트웨어 설계가 좋아짐.

    코드가 언제나 고유한 일을 수행함을 보장 함. 
    이해해야할 코드의 양이 작고, 실수 없이 수정 가능 함.

### 소프트웨어를 이해하기 쉬워짐

    코드의 목적과 의도가 잘 표현됨, 코드를 읽기 쉬워짐 (가독성 향상)

### 버그를 쉽게 찾을 수 있음.

    코드가 하는 일을 깊이 있게 빠르게 파악 가능

### 프로그래밍 속도를 높일 수 있음

    설계가 잘 된 소프트웨어는 새로운 기능을 추가하기 쉬움.
    작은 일부의 코드만 이해하여 빠르게 수정 가능
    디버깅이 쉬움

## 리팩토랑 어떻게 하면될까?

    소프트웨어의 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법이므로
    기존의 기능 유지 할 수 있도록 보장 할 수 있도록 테스트 코드를 가지고 있어야 한다.
    함수, 기능, UI, 성능, API스펙 등등.
    코드의 상태에 따라 여러 리팩토링 기법을 점진적으로 적용해 나감.

## 언제 리팩토링을 해야할까?

    3의 법칙 : 비슷한 일을 세 번째 하게 되면 리팩토링 한다.
    코드리뷰 : 코드를 이해하기 쉽게 만들기 -> 좋은 문서화
    기능추가 : 기능을 쉽게 추가하게 만들기 -> 재사용성, 모듈성

### 프로젝트 시작

    좋은 디자인 패턴으로 코드를 깔끔하게 작성하는게 기본이며..
    기능 구현을 위한 코드와 테스트 코드를 작성한다.

### 프로젝트 유지보수 단계

    기존의 기능들에 대한 테스트 확인 -> 코드를 이해하기 쉽게, 변경하기 쉽게 변경 (라팩토링) -> 기능추가 / 버그수정 / 디펜던시 마이그레이션 등.

### 오래된 프로젝트

    버그 수정 및 기능 추가시에만
    수정이 필요한 모듈/코드 한정적으로 테스트 추가 -> 리팩토링 -> 코드 수정 또는 기능 추가
    혹은 새로운 코드를 작성하는것이 빠름.

## 리팩토링의 중요한 포인트

    코드를 깨끗하게 만드는 작업이며 기능을 보존한 상태로 설계, 구조 및 구현을 개선하는 것이다
    기능을 보존 하기 위해서 테스트 코드를 작성해야 한다.
    무결점 클린코드, 완벽한 설계는 존재하지 않는다는 사실을 이해해야 하고.
    시작 - 좋은 디자인 패턴으로 코드를 깔끔하게 작성하여 기능 구현을 위한 코드를 작성하고 -> 테스트 코드를 작성하고 추후에 리팩토링한다.

### 야그니 (YAGNI)

    깨끗하게, 변경이 쉽게, 유지보수 용이하게 만들되..
    당장 필요하지 않는 기능 X
    사용하지 않는 기능 X
    지나치게 미래지향적 코드 X
   
    
    

