# Docker 기본 명령어

## **1. `docker ps`**

- **설명**: 현재 실행 중인 Docker 컨테이너를 확인합니다.
- **사용 예시**:
  ```bash
  docker ps
  ```
- **결과**: 실행 중인 모든 컨테이너 목록이 표시됩니다.

---

## **2. 활성화된 컨테이너에 접근**

- **설명**: 실행 중인 컨테이너 내부에 접근하여 명령어를 실행할 수 있습니다.
- **사용 예시**:
  ```bash
  docker exec -it <container-id> /bin/bash
  docker exec -it 3bb7c5cc2619 /bin/bash
  ```
- **결과**: 컨테이너 내부의 Bash 쉘로 접근합니다.

---

## **3. `docker stop`**

- **설명**: 실행 중인 컨테이너를 **중지**합니다.
- **영향**: 컨테이너는 중지되지만 여전히 Docker 시스템에 존재합니다. 이후 다시 시작할 수 있습니다.
- **사용 예시**:
  ```bash
  docker stop elasticsearch
  ```
- **결과**: Elasticsearch 컨테이너가 중지되지만, `docker ps -a`로 확인하면 여전히 목록에 남아 있습니다.

---

## **4. `docker rm`**

- **설명**: 중지된 컨테이너를 **삭제**합니다.
- **영향**: 컨테이너 자체가 삭제되므로, 해당 컨테이너를 다시 시작할 수 없습니다. 하지만 컨테이너가 사용한 이미지는 여전히 남아 있습니다.
- **사용 예시**:
  ```bash
  docker rm elasticsearch
  ```
- **결과**: Elasticsearch 컨테이너가 완전히 삭제됩니다. 하지만 컨테이너가 참조한 이미지는 `docker images`에 남아 있습니다.

---

## **5. `docker rmi`**

- **설명**: Docker 이미지를 **삭제**합니다.
- **영향**: 이미지가 삭제되므로, 해당 이미지를 기반으로 새로운 컨테이너를 만들 수 없습니다. 만약 이미지가 컨테이너에서 참조 중이라면 삭제되지 않습니다.
- **사용 예시**:
  ```bash
  docker rmi docker.elastic.co/elasticsearch/elasticsearch:8.9.0
  ```
- **결과**: Elasticsearch 이미지가 삭제됩니다. 이후 동일한 이미지를 다시 사용하려면 재다운로드하거나 새로 빌드해야 합니다.

---

## **6. 차이점 요약**

| 명령어           | 대상   | 설명             | 결과                                    |
|---------------|------|----------------|---------------------------------------|
| `docker stop` | 컨테이너 | 컨테이너 실행을 중지    | 컨테이너는 중지되지만 삭제되지 않음                   |
| `docker rm`   | 컨테이너 | 중지된 컨테이너를 삭제   | 컨테이너가 완전히 삭제되지만 이미지는 남아 있음            |
| `docker rmi`  | 이미지  | Docker 이미지를 삭제 | 이미지가 삭제되며, 해당 이미지를 사용하는 컨테이너도 삭제해야 가능 |

---

## **7. 언제 `docker rmi`가 필요한가?**

- 새로 빌드된 이미지를 적용하려고 할 때, 기존 이미지가 남아 있으면 Docker가 캐시를 사용하여 이전 이미지를 참조할 수 있습니다. 이럴 때 `docker rmi`로 이미지를 삭제하면 새로 빌드된 이미지가 강제로 사용됩니다.
- 디스크 공간을 절약하려고 불필요한 이미지를 정리할 때도 유용합니다.

---

## **8. 실제 사용 예시**

### **기존 컨테이너만 삭제**

- 컨테이너를 중지하고 삭제하지만, 이미지는 유지하고 싶을 때:
  ```bash
  docker stop elasticsearch
  docker rm elasticsearch
  ```
- **결과**: 컨테이너만 삭제되고, 이미지는 남아 있으므로 다시 컨테이너를 생성할 수 있습니다.

### **이미지까지 완전히 삭제**

- 새 이미지를 빌드하거나 기존 이미지를 더 이상 사용하지 않을 때:
  ```bash
  docker stop elasticsearch
  docker rm elasticsearch
  docker rmi docker.elastic.co/elasticsearch/elasticsearch:8.9.0
  ```
- **결과**: 컨테이너와 이미지가 모두 삭제됩니다. 이후 동일한 이미지를 사용하려면 다시 다운로드하거나 빌드해야 합니다.

---

## **9. 정리**

- `docker stop`과 `docker rm`은 컨테이너를 중지하고 삭제하는 데 사용되며, 이미지는 그대로 남아 있습니다.
- `docker rmi`는 이미지를 삭제하는 명령으로, 새 이미지를 적용하거나 디스크 공간을 정리할 때 사용됩니다.
- 새로 빌드된 이미지를 적용하려면 **기존 이미지를 삭제(`docker rmi`)**하는 것이 좋습니다.